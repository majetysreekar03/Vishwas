<% layout('layout/boilerplate') %>


<style>
       body {
            background-color: #EFFFFD;
        }
        
</style>


    <div class="container col-lg-6 col-md d-flex flex-column justify-content-center position-relative border border-light py-2"
        style=" height: auto;">
        <div class="card shadow mb-4">

            <div class="card-body">

                <h4 class="card-title text-center" style="font-family: monospace;">Edit Place</h4>

                <form action="/place/<%= place.id %>?_method=PUT" method="post" enctype="multipart/form-data"
                    class="needs-validation" novalidate>

                    <div class="form-group mb-2">
                        <label for="name1">Name</label>
                        <input type="text" class="form-control" name="name" id="name1" value="<%= place.name %>"
                            required>
                        <div class="valid-feedback">
                            Looks Great!
                        </div>
                        <div class="invalid-feedback">
                            Please name the place.
                        </div>
                    </div>


                    <div class="form-group mb-2">
                        <label for="location1">Location</label>
                        <input type="text" class="form-control" name="location" id="location1"
                            value="<%=  place.location %>" required>
                        <div class="valid-feedback">
                            Looks Great!
                        </div>
                        <div class="invalid-feedback">
                            Please add the location.
                        </div>
                    </div>



                    <div class="form-group mb-2">
                        <label for="description1">Description</label>
                        <textarea class="form-control" id="description1" rows="3" name="description"
                            required><%= place.description %></textarea>
                        <div class="valid-feedback">
                            Looks Great!
                        </div>
                        <div class="invalid-feedback">
                            Please provide a description about the place.
                        </div>
                    </div>


                    <div class="form-group mb-2">
                        <label for="contact1">Contact:</label>
                        <input type="number" class="form-control" name="contact" id="contact1"
                            value="<%= place.contact %>" required>
                        <div class="valid-feedback">
                            Looks Great!
                        </div>
                        <div class="invalid-feedback">
                            Please provide contact details.
                        </div>
                    </div>


                    <div class="form-group mb-3">
                        <label for="category1">Category</label>
                        <select class="form-select" name="category" id="category1">
                            <option value="hotel" <%=place.category==='hotel' ? 'selected' : '' %>>Hotel</option>
                            <option value="restaurant" <%=place.category==='restaurant' ? 'selected' : '' %>>Restaurant
                            </option>
                            <option value="theater" <%=place.category==='theater' ? 'selected' : '' %>>Theater</option>
                            <option value="building" <%=place.category==='building' ? 'selected' : '' %>>Building
                            </option>
                            <option value="park" <%=place.category==='park' ? 'selected' : '' %>>Park</option>
                            <option value="others" <%=place.category==='others' ? 'selected' : '' %>>Others</option>
                        </select>
                    </div>



                    <div class="input-group mb-3 custom-file">
                        <input type="file" class="form-control" id="images" name="images" multiple required>
                        <label for="images" class="custom-file-label form-control"></label>
                        <div class="valid-feedback">
                            Looks Great!
                        </div>
                        <div class="invalid-feedback">
                            Please share few clicks of the place.
                        </div>
                    </div>


                    <% if(place.images.length>0){%>
                        <div class="mb-3">
                            <p>Select images you want to delete.</p>
                            <% place.images.forEach(function(img, i){ %>
                                <img src="<%= img.url %>" alt="" class="img-thumbnail m-1">
                                <div class="form-check-inline">
                                    <input type="checkbox" id="image-<%= i %>" name="deleteImages[]"
                                        value="<%= img.filename %>">
                                    <!-- All checkbox have a same name ('deleteImages[]'), now if we check any checkbox, its value is added to deleteImages array.
                                    Now if we check by console.log(req.body) (inside updateCamp in controllers) we see those values are added into deleteImages array. -->
                                </div>
                                <!-- We can add label too if we want--><label for="image-<%= i %>"></label>
                                <!-- Instead of calling 'img.url' as src, we call 'img.thumbnail' as then we can apply transformation to it.-->
                                <% }) %>
                        </div>
                        <% } %>

                            <button type="submit" class="btn btn-success my-2">Update</button>

                </form>


                <a href="/showAll">Back to Main page</a>
            </div>

        </div>


    </div>